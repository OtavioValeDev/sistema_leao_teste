<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cliente Simple - Debug</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .product { border: 1px solid #ccc; padding: 10px; margin: 10px 0; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>üß™ Cliente Simple - Teste de Integra√ß√£o</h1>
    <p>Esta √© uma vers√£o simplificada para testar se o cliente.html consegue carregar produtos da API.</p>

    <button onclick="loadProducts()">üîÑ Carregar Produtos</button>
    <button onclick="clearProducts()">üóëÔ∏è Limpar</button>

    <div id="status"></div>
    <div id="products"></div>

    <script>
        const API_BASE = window.location.protocol + '//' + window.location.host + '/products';

        async function loadProducts() {
            const statusDiv = document.getElementById('status');
            const productsDiv = document.getElementById('products');

            statusDiv.innerHTML = '<div class="success">üîÑ Carregando produtos...</div>';

            try {
                console.log('Fazendo requisi√ß√£o para:', API_BASE);
                const response = await fetch(API_BASE);

                console.log('Status da resposta:', response.status);

                if (!response.ok) {
                    throw new Error(`Erro HTTP: ${response.status} ${response.statusText}`);
                }

                const products = await response.json();
                console.log('Produtos recebidos:', products);

                statusDiv.innerHTML = `<div class="success">‚úÖ Sucesso! Carregados ${products.length} produtos.</div>`;

                productsDiv.innerHTML = '';
                if (products.length === 0) {
                    productsDiv.innerHTML = '<p>Nenhum produto encontrado.</p>';
                } else {
                    products.forEach(product => {
                        const productDiv = document.createElement('div');
                        productDiv.className = 'product';
                        productDiv.innerHTML = `
                            <h3>${product.name}</h3>
                            <p>ID: ${product.id}</p>
                            <p>Pre√ßo: R$ ${(product.priceInCents / 100).toFixed(2)}</p>
                        `;
                        productsDiv.appendChild(productDiv);
                    });
                }

            } catch (error) {
                console.error('Erro:', error);
                statusDiv.innerHTML = `<div class="error">‚ùå Erro: ${error.message}</div>`;
                productsDiv.innerHTML = '<p>Erro ao carregar produtos.</p>';
            }
        }

        function clearProducts() {
            document.getElementById('status').innerHTML = '';
            document.getElementById('products').innerHTML = '';
        }

        // Carregar automaticamente ao abrir a p√°gina
        window.addEventListener('load', loadProducts);
    </script>
</body>
</html>
